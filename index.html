<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Solo Leveling Grind</title>
<link rel="icon" href="https://raw.githubusercontent.com/maecrypty-cloud/assets/main/sl-icon.png">
<style>
    body {
        font-family: 'Trebuchet MS', sans-serif;
        margin: 0;
        padding: 0;
        background: url('https://raw.githubusercontent.com/maecrypty-cloud/assets/main/sl-bg.jpg') no-repeat center center fixed;
        background-size: cover;
        color: white;
        text-align: center;
    }
    .overlay {
        background: rgba(0, 0, 0, 0.7);
        padding: 15px;
        border-radius: 10px;
        margin: 10px;
    }
    h1 { font-size: 28px; }
    #xp-bar-container {
        width: 90%;
        background: #333;
        margin: 10px auto;
        border-radius: 10px;
        overflow: hidden;
    }
    #xp-bar {
        width: 0;
        height: 20px;
        background: linear-gradient(90deg, #4caf50, #76ff03);
        transition: width 0.5s;
    }
    #character img, #boss img {
        width: 150px;
        height: auto;
        margin-top: 10px;
        border-radius: 10px;
    }
    button {
        background: #3f51b5;
        color: white;
        border: none;
        padding: 10px 15px;
        margin: 10px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
    }
    .task, .punishment {
        background: rgba(50, 50, 50, 0.9);
        padding: 10px;
        margin: 10px;
        border-radius: 10px;
    }
    .done-btn {
        background: #4caf50;
        padding: 5px 10px;
        margin-top: 10px;
        display: inline-block;
        border-radius: 5px;
        cursor: pointer;
    }
    .level-up {
        animation: flash 1s ease-out;
    }
    @keyframes flash {
        0% { background-color: rgba(255,255,255,0.8); }
        100% { background-color: transparent; }
    }
</style>
</head>
<body>
<div class="overlay">
    <h1>Solo Leveling Grind</h1>
    <h3 id="level-text">Level 1 (E-Rank)</h3>
    <div id="xp-bar-container"><div id="xp-bar"></div></div>
    <p id="xp-text">0 / 100 XP</p>
    <div id="character"><img src="https://raw.githubusercontent.com/maecrypty-cloud/assets/main/jinwoo.png" alt="Character"></div>

    <h2>Your Tasks</h2>
    <button onclick="addTask()">+ Add Task</button>
    <div id="tasks"></div>

    <h2>Punishments</h2>
    <div id="punishments"></div>

    <h2 id="boss-header" style="display:none;">Boss Battle!</h2>
    <div id="boss"></div>
</div>

<script>
let xp = 0, level = 1, tasks = [], punishments = [], bossMode = false;
const xpPerTask = 2, xpPerLevel = 100;
const characterImages = [
  'https://raw.githubusercontent.com/maecrypty-cloud/assets/main/jinwoo.png',
  'https://raw.githubusercontent.com/maecrypty-cloud/assets/main/cha-hae-in.png',
  'https://raw.githubusercontent.com/maecrypty-cloud/assets/main/beru.png',
  'https://raw.githubusercontent.com/maecrypty-cloud/assets/main/go-gun-hee.png'
];
const normalPunishments = [
  "No social media for 6 hr",
  "Delete one distracting app",
  "Do mock test",
  "Read 2 additional GK topics",
  "Learn 30 important formulas",
  "Solve 100 GK questions",
  "Read missed topic twice",
  "Do 20 push-ups",
  "Do 15 squats",
  "Plank for 2 min"
];
const deathModeCombos = [
  "Study 6 hrs without break + Write summary of 2 topics",
  "Study 4 hrs + Do 50 push-ups",
  "Solve 200 GK questions + Learn 50 formulas",
  "Read 5 missed topics + No phone for 8 hrs",
  "Write notes for 3 subjects + Do 100 squats",
  "Study from 10 PM to 4 AM",
  "Complete 2 full mock tests + 20 min plank",
  "Revise weekâ€™s syllabus + No social media 12 hrs",
  "Create mind maps for 3 topics + 30 min cardio",
  "Study 8 hrs + Cold shower after"
];
const rewards = ["Watch anime 1 hr", "Hang out", "Gaming 1 hr", "Social media 1 hr", "Favorite snack"];
const bosses = [
  {name: "Cerberus", img: "https://raw.githubusercontent.com/maecrypty-cloud/assets/main/boss1.png"},
  {name: "Ice Elf King", img: "https://raw.githubusercontent.com/maecrypty-cloud/assets/main/boss2.png"}
];

function saveData() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
    localStorage.setItem('punishments', JSON.stringify(punishments));
    localStorage.setItem('xp', xp);
    localStorage.setItem('level', level);
}
function loadData() {
    tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    punishments = JSON.parse(localStorage.getItem('punishments')) || [];
    xp = parseInt(localStorage.getItem('xp')) || 0;
    level = parseInt(localStorage.getItem('level')) || 1;
}
loadData();
render();

function addTask() {
    let name = prompt("Enter task name:");
    let time = prompt("Enter deadline (HH:MM):");
    if (!name || !time) return;
    tasks.push({name, time, done:false});
    saveData();
    render();
}

function render() {
    document.getElementById('tasks').innerHTML = '';
    tasks.forEach((t,i)=>{
        let div=document.createElement('div');
        div.className="task";
        div.innerHTML=`<strong>${t.name}</strong><br>Deadline: ${t.time}
        <div class="done-btn" onclick="completeTask(${i})">Done</div>`;
        document.getElementById('tasks').appendChild(div);
    });
    document.getElementById('punishments').innerHTML='';
    punishments.forEach((p,i)=>{
        let div=document.createElement('div');
        div.className="punishment";
        div.innerHTML=`${p}<br><div class="done-btn" onclick="donePunishment(${i})">Mark Done</div>`;
        document.getElementById('punishments').appendChild(div);
    });
    updateXP();
}

function completeTask(i) {
    tasks.splice(i,1);
    xp+=xpPerTask;
    checkLevelUp();
    saveData();
    render();
}

function donePunishment(i){
    punishments.splice(i,1);
    saveData();
    render();
}

function updateXP() {
    let percent=(xp%xpPerLevel)/xpPerLevel*100;
    document.getElementById('xp-bar').style.width=percent+'%';
    document.getElementById('xp-text').innerText=`${xp%xpPerLevel} / ${xpPerLevel} XP`;
    document.getElementById('level-text').innerText=`Level ${level} (${getRank(level)})`;
    document.getElementById('character').innerHTML=`<img src="${characterImages[(level-1)%characterImages.length]}">`;
}

function checkLevelUp() {
    if (xp>=level*xpPerLevel){
        level++;
        document.body.classList.add('level-up');
        setTimeout(()=>document.body.classList.remove('level-up'),1000);
        if (level%5===0) startBossBattle();
    }
}

function getRank(lvl){
    if(lvl<5)return "E-Rank";
    if(lvl<10)return "D-Rank";
    if(lvl<15)return "C-Rank";
    if(lvl<20)return "B-Rank";
    return "A-Rank Hunter";
}

function startBossBattle(){
    bossMode=true;
    let boss=bosses[Math.floor(Math.random()*bosses.length)];
    document.getElementById('boss-header').style.display='block';
    document.getElementById('boss').innerHTML=`<h3>${boss.name}</h3><img src="${boss.img}"><br>Defeat by completing 3 tasks today!`;
    notify("Boss Battle!", `Defeat ${boss.name} by completing 3 tasks!`);
}

function checkDeadlines(){
    let now=new Date();
    tasks.forEach((t,i)=>{
        let [h,m]=t.time.split(':');
        let deadline=new Date();
        deadline.setHours(h,m);
        if(now>deadline && !t.done){
            assignPunishment();
            tasks.splice(i,1);
        }
    });
    saveData();
    render();
}

function assignPunishment(){
    let punishment;
    if(Math.random()<0.5){
        punishment="DEATH MODE: "+deathModeCombos[Math.floor(Math.random()*deathModeCombos.length)];
        xp-=15;
        rewardAfterDeath();
    } else {
        punishment="PUNISHMENT: "+normalPunishments[Math.floor(Math.random()*normalPunishments.length)];
        xp-=10;
    }
    punishments.push(punishment);
    notify("Punishment Assigned!", punishment);
}

function rewardAfterDeath(){
    let reward=rewards[Math.floor(Math.random()*rewards.length)];
    punishments.push("Reward after Death Mode: "+reward);
}

function notify(title,body){
    if(Notification.permission==="granted"){
        new Notification(title,{body});
    }
}

if(Notification.permission!=="granted"){Notification.requestPermission();}
setInterval(checkDeadlines,30000);
</script>
</body>
</html>
